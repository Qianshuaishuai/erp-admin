<fieldset class="layui-elem-field">
    <legend>项目详情</legend>
    <div class="layui-layout layui-layout-admin" style="padding-left: 40px;margin-top: 20px;">
        <form class="layui-form layui-form-pane">
            <div class="layui-form-item" pane>
                <label class="layui-form-label">项目名称</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_id" value="{{.Project.Name}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">联系电话</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Phone}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">项目类型</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Type}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">所在地</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Address}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">资金需求</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Money}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">机构</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Agency}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">注册地</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.AddTip}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">项目简介</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.Introduce}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">身份证</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Project.IDCard}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">申请时间</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Time}}" readonly class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">行业标签</label>
                <div class="layui-input-block">
                    <div class="site-block">
                        {{range $index,$elem := .Industrys}}
                        <input type="checkbox" name="industry{{$index}}" value="{{$elem}}" checked title="{{$elem}}">
                        {{end}}
                    </div>
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">申请名片</label>
                <div class="layui-input-block">
                    <img name="paper_time" src="{{.Project.Icon}}">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">背景图</label>
                <div class="layui-input-block">
                    <img name="paper_time" src="{{.Project.Background}}">
                </div>
            </div>
            <div class="layui-form-item" pane>
                <label class="layui-form-label">审核状态</label>
                <div class="layui-input-block">
                    <input type="text" name="paper_time" value="{{.Status}}" readonly class="layui-input">
                </div>
            </div>
        </form>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" onclick="javascript:history.go(-1);">返回列表</button>
            </div>
        </div>
    </div>
</fieldset>

<script>
    layui.use(['form', 'element', 'layer', 'jquery', 'util'], function () {
        var form = layui.form;
        var $ = layui.jquery;
        var layer = layui.layer;
        var util = layui.util;

        //Top按钮
        util.fixbar({
            bar1: false
        });

        form.on('submit(addTag)', function (data) {
            var form_data = data.field;

            if (form_data.username == "") {
                alert("专家名字不能为空")
                return false
            }
            if (form_data.phone == "") {
                alert("联系方式不能为空")
                return false
            }
            if (form_data.job == "") {
                alert("职业不能为空")
                return false
            }
            if (form_data.address == "") {
                alert("所在地不能为空")
                return false
            }
            if (form_data.school == "") {
                alert("毕业院校不能为空")
                return false
            }
            if (form_data.agency == "") {
                alert("机构不能为空")
                return false
            }
            if (form_data.profess == "") {
                alert("所属领域不能为空")
                return false
            }
            if (form_data.position == "") {
                alert("职位不能为空")
                return false
            }
            if (form_data.introduce == "") {
                alert("个人简介不能为空")
                return false
            }
            if (form_data.achieve == "") {
                alert("专业成就不能为空")
                return false
            }
            if (!filearr[0]) {
                alert("请先上传专家头像")
                return false
            }
            if (!filearr[1]) {
                alert("请先上传专家名片")
                return false
            }

            var formData = new FormData();
            formData.append("username", form_data.username)
            formData.append("phone", form_data.phone)
            formData.append("job", form_data.job)
            formData.append("address", form_data.address)
            formData.append("school", form_data.school)
            formData.append("agency", form_data.agency)
            formData.append("profess", form_data.profess)
            formData.append("position", form_data.position)
            formData.append("introduce", form_data.introduce)
            formData.append("achieve", form_data.achieve)
            formData.append("good", form_data.good)
            formData.append("look", form_data.look)
            formData.append("iconFile", filearr[0])
            formData.append("cardFile", filearr[1])
            formData.append("tags", pro)

            $.ajax({
                url: '/connection/addconnection',
                type: 'post',
                data: formData,
                processData: false,
                mimeType: "multipart/form-data",
                contentType: false,
                success: function (data) {
                    var obj = JSON.parse(data);
                    if (obj.status == 0) {
                        layer.msg("操作成功", { icon: 1, time: 2000 }, function () {
                            // 跳转到列表页
                            window.location.href = "/connection/list";
                        })
                    } else {
                        layer.msg(obj.message)
                    }
                },
            });

            return false;
        });
    })
</script>